<div class="page">
    <div class="page-wrap">
        <div class="row">
            <div class="col-sm-12">
                <div class="panel panel-default panel-hovered panel-stacked mb20">
                    <div class="panel-heading">
                        <h4>
                            Detalle del crédito(s) de:
                            <strong>{{nombre_completo}}</strong>
                            <span style="margin-left: 1em;">
                                <label ng-if="categoria == 'A'" class="label label-success mr5">Categoria: {{categoria}}</label>
                                <label ng-if="categoria == 'B'" class="label label-primary mr5">Categoria: {{categoria}}</label>
                                <label ng-if="categoria == 'C'" class="label label-info mr5">Categoria: {{categoria}}</label>
                                <label ng-if="categoria == 'D'" class="label label-warning mr5">Categoria: {{categoria}}</label>
                                <label ng-if="categoria == 'E'" class="label label-danger mr5">Categoria: {{categoria}}</label>
                            </span>
                        </h4>
                    </div>
                    <div class="panel-body">
                        <div class="row">
                            <div class="form-horizontal">
                                <div class="form-group">
                                    <label class="col-md-2 control-label">PDI:</label>
                                    <div class="col-md-4">
                                        <input
                                            type="text"
                                            class="form-control"
                                            ng-model="dpi"
                                            disabled/>
                                    </div>

                                    <label class="col-md-2 control-label">Teléfono:</label>
                                    <div class="col-md-3">
                                        <input
                                            type="text"
                                            class="form-control"
                                            ng-model="telefono"
                                            disabled/>
                                    </div>

                                    <br />
                                    <br />

                                    <label class="col-md-2 control-label">Género:</label>
                                    <div class="col-md-4">
                                        <input
                                            type="text"
                                            class="form-control"
                                            ng-model="sexo"
                                            disabled/>
                                    </div>

                                    <label class="col-md-2 control-label">Estado civil:</label>
                                    <div class="col-md-3">
                                        <input
                                            type="text"
                                            class="form-control"
                                            ng-model="estado_civil"
                                            disabled/>
                                    </div>

                                    <br />
                                    <br />

                                    <label class="col-md-2 control-label">Dirección:</label>
                                    <div class="col-md-4">
                                        <input
                                            type="text"
                                            class="form-control"
                                            ng-model="direccion"
                                            disabled/>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-sm-12">
                <tabset class="tabs-flip" justified="true">
                    <tab heading="DETALLE DE CREDITOS">
                        <div class="clearfix">
                            <div class="panel-body">
                                <div ng-show="showInputSelect">
                                    <div class="row">
                                        <div class="form-horizontal">
                                            <div class="form-group">
                                                <label class="col-md-2 control-label">Creditos:</label>
                                                <div class="col-md-4">
                                                    <select
                                                        class="form-control"
                                                        ng-model="itemCredit"
                                                        ng-options="item as (
                                                                item.planes.descripcion + 
                                                                ' - Q.' + 
                                                                item.montos.monto + 
                                                                '\n\n(' + 
                                                                item.statusText +
                                                                ') ') 
                                                                for item in listCredito"
                                                        ng-change="creditSelected(itemCredit)"
                                                    ></select>
                                                </div>
                                                <div style="display: flex;align-items: center;">
                                                    <div style="margin-right: 2em">
                                                        <h4>
                                                            <span
                                                                ng-if="status_credit == 1"
                                                                class="label label-success">
                                                                CRÉDITO ACTIVO
                                                            </span>
                                                        </h4>
                                                        <h4>
                                                            <span
                                                                ng-if="status_credit == 0"
                                                                class="label label-info">
                                                                CRÉDITO COMPLETADO
                                                            </span>
                                                        </h4>
                                                        <h4>
                                                            <span
                                                                ng-if="status_credit == 2"
                                                                class="label label-danger">
                                                                CRÉDITO ELIMINADO
                                                            </span>
                                                        </h4>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="form-horizontal">
                                        <div class="form-group">
                                            <label class="col-md-2 control-label">
                                                Estado de morosidad:
                                            </label>
                                            <div class="col-md-4">
                                                <input
                                                    type="text"
                                                    class="form-control"
                                                    ng-model="credit_arrears_status"
                                                    disabled/>
                                            </div>

                                            <br />
                                            <br />

                                            <label class="col-md-2 control-label">
                                                Plan:
                                            </label>
                                            <div class="col-md-4">
                                                <input
                                                    type="text"
                                                    class="form-control"
                                                    ng-model="plan.descripcion"
                                                    disabled/>
                                            </div>

                                            <label class="col-md-2 control-label">
                                                Monto total:
                                            </label>
                                            <div class="col-md-3">
                                                <input
                                                    type="text"
                                                    class="form-control"
                                                    ng-model="monto_total"
                                                    disabled/>
                                            </div>

                                            <br />
                                            <br />

                                            <label class="col-md-2 control-label">
                                                Fecha de inicio:
                                            </label>
                                            <div class="col-md-4">
                                                <input
                                                    type="text"
                                                    class="form-control"
                                                    ng-model="fecha_inicio"
                                                    disabled
                                                />
                                            </div>
                                            <label class="col-md-2 control-label">
                                                Fecha sugerida finalización:
                                            </label>
                                            <div class="col-md-3">
                                                <input
                                                    type="text"
                                                    class="form-control"
                                                    ng-model="fecha_fin"
                                                    disabled
                                                />
                                            </div>

                                            <div ng-if="status_credit == 0">
                                                <br />
                                                <br />
                                                <label class="col-md-2 control-label">
                                                </label>
                                                <div class="col-md-4">
                                                </div>
                                                <label class="col-md-2 control-label">
                                                    Fecha último pago realizado:
                                                </label>
                                                <div class="col-md-3">
                                                    <input
                                                        type="text"
                                                        class="form-control"
                                                        ng-model="fecha_finalizado"
                                                        disabled
                                                    />
                                                </div>
                                            </div>

                                            <br />
                                            <br />

                                            <label class="col-md-2 control-label">
                                                Cobrador:
                                            </label>
                                            <div class="col-md-4">
                                                <input
                                                    type="text"
                                                    class="form-control"
                                                    ng-model="cobrador"
                                                    disabled
                                                />
                                            </div>
                                            <label
                                                ng-if="plan.tipo == 1 || plan.tipo == undefined || plan.tipo == 0"
                                                class="col-md-2 control-label">
                                                Cuota diaria:
                                            </label>
                                            <label
                                                ng-if="plan.tipo == 2"
                                                class="col-md-2 control-label">
                                                Cuota semanal:
                                            </label>
                                            <label
                                                ng-if="plan.tipo == 3"
                                                class="col-md-2 control-label">
                                                Cuota mensual:
                                            </label>
                                            <div class="col-md-3">
                                                <input
                                                    type="text"
                                                    class="form-control"
                                                    ng-model="cuota_diaria"
                                                    disabled
                                                />
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <br />
                                <span class="clearfix"></span>
                                <div class="row">
                                    <div class="col-md-2 col-md-offset-1">
                                        <div class="panel panel-primary mb20 mini-box panel-hovered">
                                            <div class="panel-body">
                                                <div class="clearfix">
                                                    <div class="info left">
                                                        <h3 class="mt0 text-primary text-bold">
                                                            {{saldo_pendiente}}
                                                        </h3>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="panel-footer clearfix panel-footer-sm panel-footer-primary">
                                                <p class="mt0 mb0 left">
                                                    <strong>Monto pendiente a cancelar</strong>
                                                </p>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-2">
                                        <div class="panel panel-success mb20 mini-box panel-hovered">
                                            <div class="panel-body">
                                                <div class="clearfix">
                                                    <div class="info left">
                                                        <h3 class="mt0 text-success text-bold">
                                                            {{total_cancelado}}
                                                        </h3>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="panel-footer clearfix panel-footer-sm panel-footer-success">
                                                <p class="mt0 mb0 left">
                                                    <strong>Monto cancelado</strong>
                                                </p>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="col-md-2">
                                        <div class="panel panel-info mb20 mini-box panel-hovered">
                                            <div class="panel-body">
                                                <div class="clearfix">
                                                    <div class="info left">
                                                        <h3 class="mt0 text-info text-bold">
                                                            {{cuotas_pagadas}}
                                                        </h3>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="panel-footer clearfix panel-footer-sm panel-footer-info">
                                                <p class="mt0 mb0 left">
                                                    <strong>Cuotas pagadas</strong>
                                                </p>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-2">
                                        <div class="panel panel-danger mb20 mini-box panel-hovered">
                                            <div class="panel-body">
                                                <div class="clearfix">
                                                    <div class="info left">
                                                        <h3 class="mt0 text-danger text-bold">
                                                            {{cuotas_atrasadas}}
                                                        </h3>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="panel-footer clearfix panel-footer-sm panel-footer-danger">
                                                <p class="mt0 mb0 left">
                                                    <strong>Cuotas atrasadas</strong>
                                                </p>
                                            </div>
                                        </div>
                                    </div>
                                    <!-- REGION DIAS ATRASASO -->
                                    <div class="col-md-2">
                                        <div ng-if="credit_arrears_status == 'Excelente'">
                                            <div class="panel panel-success mb20 mini-box panel-hovered">
                                                <div class="panel-body">
                                                    <div class="clearfix">
                                                        <div class="info left">
                                                            <h3 class="mt0 text-success text-bold">
                                                                {{dias_no_pagados}}
                                                            </h3>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="panel-footer clearfix panel-footer-sm panel-footer-success">
                                                    <p class="mt0 mb0 left">
                                                        <strong>Días Atrasados</strong>
                                                    </p>
                                                </div>
                                            </div>
                                        </div>
                                        <div ng-if="credit_arrears_status == 'Bueno'">
                                            <div class="panel panel-warning mb20 mini-box panel-hovered">
                                                <div class="panel-body">
                                                    <div class="clearfix">
                                                        <div class="info left">
                                                            <h3 class="mt0 text-warning text-bold">
                                                                {{dias_no_pagados}}
                                                            </h3>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="panel-footer clearfix panel-footer-sm panel-footer-warning">
                                                    <p class="mt0 mb0 left">
                                                        <strong>Días Atrasados</strong>
                                                    </p>
                                                </div>
                                            </div>
                                        </div>
                                        <div ng-if="credit_arrears_status == 'Moroso'">
                                            <div class="panel panel-pink mb20 mini-box panel-hovered">
                                                <div class="panel-body">
                                                    <div class="clearfix">
                                                        <div class="info left">
                                                            <h3 class="mt0 text-pink text-bold">
                                                                {{dias_no_pagados}}
                                                            </h3>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="panel-footer clearfix panel-footer-sm panel-footer-pink">
                                                    <p class="mt0 mb0 left">
                                                        <strong>Días Atrasados</strong>
                                                    </p>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <!-- END REGION -->
                                </div>
                                <br />
                                <div class="row">
                                    <div class="col-md-1"></div>
                                    <div class="col-md-10">
                                        <progressbar
                                            class="progress-striped"
                                            value="porcentaje"
                                            type="success">
                                            {{porcentaje}}%
                                        </progressbar>
                                        <!-- <progressbar class="progress-striped" ng-model="cliente.porcentaje" type="primary">{{cliente.porcentaje}}</progressbar> -->
                                    </div>
                                </div>
                                <br />
                                <div class="col-md-12" ng-show="status_credit == 2">
                                    <div class="alert alert-danger text-center">
                                        <div>
                                            <h5>
                                                <strong>
                                                    Motivo de la eliminación: 
                                                </strong>
                                                {{reasonForDeleted}}
                                            </h5>
                                        </div>
                                    </div>
                                </div>
                                <br />
                                <div class="row">
                                    <div class="col-sm-12 text-center">
                                        <!--<a type="button" class="btn btn-success btn-rounded" href="#/clientes">Imprimir estado de cuenta</a>-->
                                        <a
                                            ng-show="status_credit == 1"
                                            type="button"
                                            class="btn btn-primary btn-rounded"
                                            href="#/abonos?name={{nombre}}&lastname={{apellido}}">
                                            <strong>
                                                ABONAR CUOTAS
                                            </strong>
                                        </a>
                                        <button
                                            ng-show="status_credit == 1 || status_credit == 0"
                                            style="margin-left: 1em"
                                            type="button"
                                            class="btn btn-success btn-rounded"
                                            ng-click="modalHistoryOpen(id)">
                                            <strong>VER HISTORIAL</strong>
                                        </button>
                                        <button
                                            ng-show="status_credit == 1"
                                            style="margin-left: 1em"
                                            type="button"
                                            class="btn btn-danger btn-rounded"
                                            ng-click="modalValidateAccessOpen(2)">
                                            <strong>ELIMINAR CRÉDITO</strong>
                                        </button>
                                        <!--<a type="button" class="btn btn-success btn-rounded" href="#/clientes">Renovar crédito</a>-->
                                    </div>
                                </div>
                                <br />                                
                            </div>
                        </div>
                    </tab>
                    <tab heading="RESUMEN TOTAL CRÉDITOS" >
                        <div class="clearfix">
                            <row>
                                <br>
                                <div class="col-md-6 col-md-offset-3">
                                    <div class="col-md-6 col-sm-6">
                                        <div class="panel panel-default mb20 mini-box panel-hovered">
                                            <div class="panel-body">
                                                <div class="clearfix">
                                                    <div class="info left">
                                                        <h2 class="mt0 text-primary text-bold">{{cantidadCreditos}}</h2>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="panel-footer clearfix panel-footer-sm panel-footer-primary">
                                                <p class="mt0 mb0 left">TOTAL CRÉDITOS OTORGADOS</p>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-6 col-sm-6">
                                        <div class="panel panel-default mb20 mini-box panel-hovered">
                                            <div class="panel-body">
                                                <div class="clearfix">
                                                    <div class="info left">
                                                        <h2 class="mt0 text-success text-bold">{{unlockCount}}</h2>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="panel-footer clearfix panel-footer-sm panel-footer-success">
                                                <p class="mt0 mb0 left">TOTAL DE DESBLOQUEOS</p>
                                            </div>
                                        </div>
                                    </div>
                                    <br>
                                </div>
                        
                            </row>
                            
                            <row>
                                <div class="col-md-6 col-md-offset-3">
                                    <br>
                                    <div>
                                        <strong>ESTADOS DE CRÉDITOS</strong>
                                    </div>
                                    <br>
                                    <div class="list-group">
                                        <a href="javascript:;" class="list-group-item">
                                            CRÉDITOS MOROSOS
                                            <h4 class="mt0 right text-danger text-bold">{{arrearsCredits.moroso}}</h4>
                                        </a>
                                        <a href="javascript:;" class="list-group-item">
                                            CRÉDITOS BUENOS
                                            <h4 class="mt0 right text-primary text-bold">{{arrearsCredits.bueno}}</h4>
                                        </a>
                                        <a href="javascript:;" class="list-group-item">
                                            CRÉDITOS EXCELENTES
                                            <h4 class="mt0 right text-success text-bold">{{arrearsCredits.excelente}}</h4>
                                        </a>
                                    </div>
                                </div>
                            </row>
                        </div>
                    </tab>
                    <tab heading="DESBLOQUEOS"  ng-click="clearListTable()">
                        <div class="clearfix">
                            <div class="col-md-12">
                                <div class="panel-body">
                                    <div class="row">
                                        <div class="small text-bold left mt5">
                                            Mostrar&nbsp;
                                            <select data-ng-model="numPerPage" data-ng-options="num for num in numPerPageOpts"
                                                data-ng-change="onNumPerPageChange()">
                                            </select>
                                            &nbsp;entradas
                                        </div>
                                    </div>
                                </div>
                                <!-- data table -->
                                <table class="table table-bordered table-striped">
                                    <thead>
                                        <tr>
                                            <th>#
                                                <div class="th">
                                                    <i class="fa fa-caret-up icon-up" ng-click=" order('id') "
                                                        ng-class="{active: row == 'id'}"></i>
                                                    <i class="fa fa-caret-down icon-down" ng-click=" order('-id') "
                                                        ng-class="{active: row == '-id'}"></i>
                                                </div>
                                            </th>
                                            <th>
                                                Autorización
                                                <div class="th">
                                                    <i class="fa fa-caret-up icon-up" ng-click=" order('autorizacion') "
                                                        ng-class="{active: row == 'autorizacion'}"></i>
                                                    <i class="fa fa-caret-down icon-down" ng-click=" order('-autorizacion') "
                                                        ng-class="{active: row == '-autorizacion'}"></i>
                                                </div>
                                            </th>
                                            <th>
                                                Fecha
                                                <div class="th">
                                                    <i class="fa fa-caret-up icon-up" ng-click=" order('fecha') "
                                                        ng-class="{active: row == 'fecha'}"></i>
                                                    <i class="fa fa-caret-down icon-down" ng-click=" order('-fecha') "
                                                        ng-class="{active: row == '-fecha'}"></i>
                                                </div>
                                            </th>
                                            <th>
                                                Motivo de desbloqueo
                                                <div class="th">
                                                    <i class="fa fa-caret-up icon-up" ng-click=" order('abono') "
                                                        ng-class="{active: row == 'abono'}"></i>
                                                    <i class="fa fa-caret-down icon-down" ng-click=" order('-abono') "
                                                        ng-class="{active: row == '-abono'}"></i>
                                                </div>
                                            </th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr ng-repeat="unlockList in currentPageStores track by $index">
                                            <td>{{ $index + 1 }}</td>
                                            <td>{{ unlockList.supervisor.nombre }}</td>
                                            <td>{{ unlockList.created_at }}</td>
                                            <td>{{ unlockList.razon }}</td>
                                        </tr>
                                    </tbody>
                                </table>
                                <!-- #end data table -->
                                <div class="panel-footer clearfix">
                                    <p class="left mt15 small">
                                        Mostrando {{currentPageStores.length*(currentPage - 1) + 1}} a
                                        {{currentPageStores.length*currentPage}} de {{unlockList.length}}
                                        registro(s)
                                    </p>
                                    <pagination boundary-links="true" total-items="filteredData.length" ng-model="currentPage"
                                        class="pagination-sm right" max-size="5" ng-change="select(currentPage)"
                                        items-per-page="numPerPage" rotate="false" previous-text="&lsaquo;" next-text="&rsaquo;"
                                        first-text="&laquo;" last-text="&raquo;"></pagination>
                                </div>
                            </div>
                        </div>
                    </tab>
                </tabset>
            </div>
        </div>
    </div>
    <div class="toast toast-{{positionModel}}">
        <alert
            ng-repeat="toast in toasts"
            type="{{toast.type}}"
            close="closeAlert($index)"
            class="toast-{{toast.anim}}">
            <div ng-bind-html="toast.msg"></div>
        </alert>
    </div>
</div>
